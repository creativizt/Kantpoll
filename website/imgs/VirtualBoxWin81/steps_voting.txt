### Campaign Creation

When a campaign is created, a new, exclusive blockchain is created.  This means that all users who connect to a campaign have a copy of all transactions (votes, confirmations, etc) that occur within that campaign.

In addition, each campaign have an IPNS address where relevant information will be stored, such as the enodes needed to connect to the blockchain.

### Campaign data stored on IPFS

IPFS is being used to store data that is not part of the voting process. For example, the description of the campaign, the enodes of group chairpersons, and lists of candidates and parties.

### Campaign data stored in the blockchain

The data stored in the blockchain are basically composed of votes, confirmations, candidates' vote balances, groups' composition and voters' data (e.g. public key).

### Candidate registration

Candidates are registered by the creator of the campaign, who inserts candidates' data into the candidates IPFS page. For each round new candidates must be inserted.

For example, in a given campaign, ten candidates compete in the first round. In the second round, only two of them compete.

A campaign may have up to five voting rounds.

### Candidate profile

Candidates may use a WYSIWYG editor to create their profiles. They can insert tables, links, images, and they can also change the font and style of the text with this editor. 

### Group chairpersons

Group chairpersons are Kantcoin network nodes who check and register votes in blockchain. They exist to make campaigns scalable. Since we need to wait a few seconds to check each vote, performing all the checks of a ten thousand voters campaign, with only one computer, could take a whole day. Therefore, in large campaigns, these votes should be processed diffusely. 

### Group chairpersons registration

Group chairpersons need to be listening to messages sent via Tor in order to receive votes. In addition, the creator of the campaign must attribute groups to group chairpersons so that voters will know to whom send their votes.

Another role that these group chairpersons perform is to allow users to be able to connect to a campaign. For this reason, their enodes must be listed on an IPFS page.

### Voter registration

Most of e-voting systems today rely on authentication by verifying user's face and id photos. We currently authenticate voters with their cellphone numbers or email accounts. 
In order to make this work, we have created the role of the "login provider", a service that is external to the open-source project (kantcoin.org). In our case (kantcoin.com), a service that uses Amazon's Lambda and DynamoDB. 
The idea is that the creator of the campaign can freely choose the login provider. For example, he or she could use as login provider a service offered by their country's electoral authority. So the voter would log in (which in our project means to create a "vault" whose public key [address] is stored in a database of the login provider) with his electoral document.

### Giving the right to vote

Authorization to participate in an election campaign occurs after verification of the voter's username.

To make this work, it is necessary that the validation logic be embedded in the username, so that we can check if a user is able to participate in a campaign with a regular expression. To make this clearer, let's give some examples (regular expression - user groups that can participate in the campaign):

Telephones with the prefix 1-415 - residents of San Francisco.
Emails ending with @stanford.edu - members of this university.

Besides validating the username with a regular expression, the creator of the campaign checks if the voter has the symmetric key that is associated with that username in a login provider. This is done by checking the signature of a standardized message. If everything is OK, the campaign creator will grant the user the right to vote.

### Choosing a group

Before the voter can vote, he or she must choose a group. Currently, groups can consist of up to 15 members. Increasing this number would lead to a more time consuming process for validating ring signatures. Within each group, its members have the same weight. However, the donated amount can vary between groups.

Groups may represent distinct social groups or may be anonymous. The voter can choose whichever group he or she wants. However, the voter can only participate in groups whose donation value is the same as theirs.

Examples of groups:
Women (donation value: 100 finney)
Men (donation value: 120 finney)

The value of each group as well as its description is defined by the creator of the campaign. Values ??are expressed in finney (one thousandth of ether)

### Sending votes

Votes are sent, via the Tor network, to group chairpersons. Votes are then stored locally, reordered and sent all at once to the blockchain, so that it is not possible to know when each one was sent to the group chairperson.

### Vote verification

Each vote or donation is associated with a unique ring signature. This signature allows group chairpersons to verify if a vote or donation comes from a group, but it does not allow to identify the author of that signature.

At each round, there is a standard message to be sent by all voters. If the same voter sends a vote or donation more than once, it will be easily detected. So that we can guarantee the anonymity of the voter.

### Vote confirmation

In the previous step, we can not guarantee that the group chairperson will store the votes to the correct candidates. For this reason, there is a confirmation step.

If a group chairperson attempts to defraud a vote, the voter will be able to automatically send an error message to the blockchain. This error message will block the allocation of votes and donations to candidates within that group.

The confirmation step occurs after the round (ballot) is stopped by the creator of the campaign. The voters should then open the candidates page and check if the "confirmed" warning appears in front of their candidate's name. 

### Vote allocation

In order for the votes and donations to be assigned to candidates, the creator of the campaign must first close the round. Then, group chairpersons must call the "send votes", "pre-commit", and "commit" methods.
